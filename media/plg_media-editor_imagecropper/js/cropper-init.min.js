!function(){"use strict";document.onreadystatechange=function(){if("interactive"==document.readyState){var a=document.getElementById("joomla-media-image-cropper");window.imageUrl=a.getAttribute("src"),window.postUrl=a.getAttribute("data-url"),window.submitInput=document.querySelectorAll('input[type="submit"]'),window.cropperBoxDim={};var b=new Cropper(a,{crop:function(a){var b=[{x:a.detail.x,y:a.detail.y,height:a.detail.height,width:a.detail.width,rotate:a.detail.rotate,scaleX:a.detail.scaleX,scaleY:a.detail.scaleY}];document.getElementById("imagecropper-jsondata").value=b}});console.log(b);for(var c=function(a){var b=new XMLHttpRequest;b.open("POST",postUrl,!0),b.onload=function(){var a=JSON.parse(b.responseText);200==b.status&&("0"==a.status&&submitInput[0].click(),"1"==a.status&&submitInput[0].click())},b.onerror=function(){},b.send(a)},d=function(){console.log(b.getCroppedCanvas()),b.getCroppedCanvas().toBlob(function(a){var b=imageUrl.split("/").pop(),d=new FormData;d.append("files",a,b),c(d)})},e=function(a){a.addEventListener("click",function(a){var c=a.currentTarget.getAttribute("data-method"),e=a.currentTarget.getAttribute("data-option"),f=a.currentTarget.getAttribute("data-second-option");switch(c){case"zoom":b.zoom(e);break;case"rotate":b.rotate(e);break;case"scaleX":b.scaleX(-b.getData().scaleX||-1);break;case"scaleY":b.scaleY(-b.getData().scaleY||-1);break;case"move":b.move(e,f);break;default:case"crop":console.log(b.getCroppedCanvas()),d()}})},f=document.querySelectorAll(".btn"),g=0;g<f.length;g++)e(f[g])}}}();